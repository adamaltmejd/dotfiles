# Uses gpg keys for ssh, public key exported to ~/.ssh
# see ssh-add -l for all available keys.
# Requires IdentityFile to be specified for each host.
# Only activate ForwardAgent on secure servers!

Host *
    AddKeysToAgent yes
    UseKeychain yes
    PasswordAuthentication yes
    IdentitiesOnly yes

Host github.com
    HostName github.com
    IdentityFile ~/.ssh/gpg_key.pub
    User git

# Sthlm server

Host sthlm.*
    User pi
    Port 8472
    IdentityFile ~/.ssh/id_pi
    ForwardAgent yes

Host sthlm.l
    HostName 192.168.0.2
    AddressFamily inet

Host sthlm.r
    HostName sthlm.adamaltmejd.com

# Breven (Raspberry Pi 4)
Host breven.*
    User pi
    Port 8472
    IdentityFile ~/.ssh/id_pi
    ForwardAgent yes

Host breven.l
    HostName breven.local

Host breven.r
    HostName adamaltmejd.com


# SOFI compute server
# Connects through broker, using proxycommand
# https://askubuntu.com/questions/311447/how-do-i-ssh-to-machine-a-via-b-in-one-command/311454#311454

Host sofi-broker
    HostName peter.sofi.su.se
    User adam
    IdentityFile ~/.ssh/gpg_key.pub

Host sofi.*
    Port 22
    IdentityFile ~/.ssh/gpg_key.pub

Host sofi.*.r
    ProxyCommand ssh sofi-broker nc %h %p

Host sofi.katla.*
    User adam
    HostName katla.sofi.su.se
    ForwardAgent yes

Host sofi.katla_nas.*
    User adal7067
    HostName katla.sofi.su.se

Host sofi.luke.*
    User adal7067
    HostName luke.sofi.su.se

Host sofi.lucifer.*
    User adal7067
    HostName lucifer.sofi.su.se

Host sofi.casa.*
    User adal7067
    HostName casa.sofi.su.se
